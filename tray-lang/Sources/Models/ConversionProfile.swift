//
//  ConversionProfile.swift
//  tray-lang
//
//  Created for tray-lang project
//

import Foundation

struct ConversionProfile: Identifiable, Codable, Hashable {
    var id = UUID()
    var name: String
    var isEditable: Bool
    var mapping: [String: String]
    
    // Статический метод для создания всех "заводских" профилей
    static func defaultProfiles() -> [ConversionProfile] {
        return languageTemplates.keys.sorted().map { key in
            ConversionProfile(
                name: key,
                isEditable: false,
                mapping: Dictionary(uniqueKeysWithValues: languageTemplates[key]!)
            )
        }
    }
}

// ==================================================================
// РАСШИРЕННАЯ И ИСПРАВЛЕННАЯ БАЗА ШАБЛОНОВ РАСКЛАДОК
// ==================================================================
let languageTemplates: [String: [(String, String)]] = [
    
    // --- Полные раскладки (кириллица, греческий) ---
    
    "Russian (QWERTY ↔ ЙЦУКЕН)": [
        // Буквы
        ("q", "й"), ("w", "ц"), ("e", "у"), ("r", "к"), ("t", "е"), ("y", "н"), ("u", "г"), ("i", "ш"), ("o", "щ"), ("p", "з"), ("[", "х"), ("]", "ъ"),
        ("a", "ф"), ("s", "ы"), ("d", "в"), ("f", "а"), ("g", "п"), ("h", "р"), ("j", "о"), ("k", "л"), ("l", "д"), (";", "ж"), ("'", "э"),
        ("z", "я"), ("x", "ч"), ("c", "с"), ("v", "м"), ("b", "и"), ("n", "т"), ("m", "ь"), (",", "б"), (".", "ю"), ("/", "."),
        ("`", "ё"),
        
        // Буквы + Shift
        ("Q", "Й"), ("W", "Ц"), ("E", "У"), ("R", "К"), ("T", "Е"), ("Y", "Н"), ("U", "Г"), ("I", "Ш"), ("O", "Щ"), ("P", "З"), ("{", "Х"), ("}", "Ъ"),
        ("A", "Ф"), ("S", "Ы"), ("D", "В"), ("F", "А"), ("G", "П"), ("H", "Р"), ("J", "О"), ("K", "Л"), ("L", "Д"), (":", "Ж"), ("\"", "Э"),
        ("Z", "Я"), ("X", "Ч"), ("C", "С"), ("V", "М"), ("B", "И"), ("N", "Т"), ("M", "Ь"), ("<", "Б"), (">", "Ю"), ("?", ","),
        ("~", "Ё"),
        
        // Цифровой ряд
        ("1", "1"), ("!", "!"), ("2", "2"), ("@", "\""), ("3", "3"), ("#", "№"), ("4", "4"), ("$", ";"), ("5", "5"), ("%", "%"),
        ("6", "6"), ("^", ":"), ("7", "7"), ("&", "?"), ("8", "8"), ("*", "*"), ("9", "9"), ("(", "("), ("0", "0"), (")", ")"),
        ("-", "-"), ("_", "_"), ("=", "="), ("+", "+")
    ],
    
    "Ukrainian (QWERTY ↔ ЙЦУКЕН)": [
        // Буквы
        ("q", "й"), ("w", "ц"), ("e", "у"), ("r", "к"), ("t", "е"), ("y", "н"), ("u", "г"), ("i", "ш"), ("o", "щ"), ("p", "з"), ("[", "ї"),
        ("a", "ф"), ("s", "і"), ("d", "в"), ("f", "а"), ("g", "п"), ("h", "р"), ("j", "о"), ("k", "л"), ("l", "д"), (";", "ж"), ("'", "є"),
        ("z", "я"), ("x", "ч"), ("c", "с"), ("v", "м"), ("b", "и"), ("n", "т"), ("m", "ь"), (",", "б"), (".", "ю"),
        ("`", "ґ"),
        
        // Буквы + Shift
        ("Q", "Й"), ("W", "Ц"), ("E", "У"), ("R", "К"), ("T", "Е"), ("Y", "Н"), ("U", "Г"), ("I", "Ш"), ("O", "Щ"), ("P", "З"), ("{", "Ї"),
        ("A", "Ф"), ("S", "І"), ("D", "В"), ("F", "А"), ("G", "П"), ("H", "Р"), ("J", "О"), ("K", "Л"), ("L", "Д"), (":", "Ж"), ("\"", "Є"),
        ("Z", "Я"), ("X", "Ч"), ("C", "С"), ("V", "М"), ("B", "И"), ("N", "Т"), ("M", "Ь"), ("<", "Б"), (">", "Ю"),
        ("~", "Ґ"),
        
        // Цифровой ряд (отличается от русского)
        ("1", "1"), ("!", "!"), ("2", "2"), ("@", "\""), ("3", "3"), ("#", "№"), ("4", "4"), ("$", ";"), ("5", "5"), ("%", "%"),
        ("6", "6"), ("^", ":"), ("7", "7"), ("&", "?"), ("8", "8"), ("*", "*"), ("9", "9"), ("(", "("), ("0", "0"), (")", ")"),
        ("-", "-"), ("_", "_"), ("=", "="), ("+", "+"), ("/", ".")
    ],
    
    "Belarusian (QWERTY ↔ Беларуская)": [
        // Буквы
        ("q", "й"), ("w", "ў"), ("e", "у"), ("r", "к"), ("t", "е"), ("y", "н"), ("u", "г"), ("i", "ш"), ("o", "щ"), ("p", "з"), ("[", "х"), ("]", "'"),
        ("a", "ф"), ("s", "ы"), ("d", "в"), ("f", "а"), ("g", "п"), ("h", "р"), ("j", "о"), ("k", "л"), ("l", "д"), (";", "ж"), ("'", "э"),
        ("z", "я"), ("x", "ч"), ("c", "с"), ("v", "м"), ("b", "і"), ("n", "т"), ("m", "ь"), (",", "б"), (".", "ю"), ("/", "."),
        ("`", "ё"),
        
        // Буквы + Shift
        ("Q", "Й"), ("W", "Ў"), ("E", "У"), ("R", "К"), ("T", "Е"), ("Y", "Н"), ("U", "Г"), ("I", "Ш"), ("O", "Щ"), ("P", "З"), ("{", "Х"),
        ("A", "Ф"), ("S", "Ы"), ("D", "В"), ("F", "А"), ("G", "П"), ("H", "Р"), ("J", "О"), ("K", "Л"), ("L", "Д"), (":", "Ж"), ("\"", "Э"),
        ("Z", "Я"), ("X", "Ч"), ("C", "С"), ("V", "М"), ("B", "І"), ("N", "Т"), ("M", "Ь"), ("<", "Б"), (">", "Ю"), ("?", ","),
        ("~", "Ё"),
        
        // Цифровой ряд (схож с русским)
        ("1", "1"), ("!", "!"), ("2", "2"), ("@", "\""), ("3", "3"), ("#", "№"), ("4", "4"), ("$", ";"), ("5", "5"), ("%", "%"),
        ("6", "6"), ("^", ":"), ("7", "7"), ("&", "?"), ("8", "8"), ("*", "*"), ("9", "9"), ("(", "("), ("0", "0"), (")", ")"),
        ("-", "-"), ("_", "_"), ("=", "="), ("+", "+")
    ],
    
    "Bulgarian (Phonetic BDS)": [
        // Буквы
        ("q", "я"), ("w", "в"), ("e", "е"), ("r", "р"), ("t", "т"), ("y", "ъ"), ("u", "у"), ("i", "и"), ("o", "о"), ("p", "п"), ("[", "ш"), ("]", "щ"),
        ("a", "а"), ("s", "с"), ("d", "д"), ("f", "ф"), ("g", "г"), ("h", "х"), ("j", "й"), ("k", "к"), ("l", "л"), (";", "ж"), ("'", "ь"),
        ("z", "з"), ("x", "ц"), ("c", "с"), ("v", "ж"), ("b", "б"), ("n", "н"), ("m", "м"),
        
        // Заглавные
        ("Q", "Я"), ("W", "В"), ("E", "Е"), ("R", "Р"), ("T", "Т"), ("Y", "Ъ"), ("U", "У"), ("I", "И"), ("O", "О"), ("P", "П"), ("{", "Ш"), ("}", "Щ"),
        ("A", "А"), ("S", "С"), ("D", "Д"), ("F", "Ф"), ("G", "Г"), ("H", "Х"), ("J", "Й"), ("K", "К"), ("L", "Л"), (":", "Ж"), ("\"", "Ь"),
        ("Z", "З"), ("X", "Ц"), ("C", "С"), ("V", "Ж"), ("B", "Б"), ("N", "Н"), ("M", "М")
    ],
    
    "Greek (QWERTY ↔ Ελληνικά)": [
        ("q", ";"), ("w", "ς"), ("e", "ε"), ("r", "ρ"), ("t", "τ"), ("y", "υ"), ("u", "θ"), ("i", "ι"), ("o", "ο"), ("p", "π"),
        ("a", "α"), ("s", "σ"), ("d", "δ"), ("f", "φ"), ("g", "γ"), ("h", "η"), ("j", "ξ"), ("k", "κ"), ("l", "λ"),
        ("z", "ζ"), ("x", "χ"), ("c", "ψ"), ("v", "ω"), ("b", "β"), ("n", "ν"), ("m", "μ"),
        ("Q", ":"), ("W", "Σ"), ("E", "Ε"), ("R", "Ρ"), ("T", "Τ"), ("Y", "Υ"), ("U", "Θ"), ("I", "Ι"), ("O", "Ο"), ("P", "Π"),
        ("A", "Α"), ("S", "Σ"), ("D", "Δ"), ("F", "Φ"), ("G", "Γ"), ("H", "Η"), ("J", "Ξ"), ("K", "Κ"), ("L", "Λ"),
        ("Z", "Ζ"), ("X", "Χ"), ("C", "Ψ"), ("V", "Ω"), ("B", "Β"), ("N", "Ν"), ("M", "Μ")
    ],
    
    "Hebrew (QWERTY ↔ עברית)": [
        // Буквы
        ("e", "ק"), ("r", "ר"), ("t", "א"), ("y", "ט"), ("u", "ו"), ("i", "ן"), ("o", "ם"), ("p", "פ"),
        ("a", "ש"), ("s", "ד"), ("d", "ג"), ("f", "כ"), ("g", "ע"), ("h", "י"), ("j", "ח"), ("k", "ל"), ("l", "ך"), (";", "ף"),
        ("z", "ז"), ("x", "ס"), ("c", "ב"), ("v", "ה"), ("b", "נ"), ("n", "מ"), ("m", "צ"), (",", "ת"), (".", "ץ"),
        
        // Заглавные (для Caps Lock)
        ("E", "ק"), ("R", "ר"), ("T", "א"), ("Y", "ט"), ("U", "ו"), ("I", "ן"), ("O", "ם"), ("P", "פ"),
        ("A", "ש"), ("S", "ד"), ("D", "ג"), ("F", "כ"), ("G", "ע"), ("H", "י"), ("J", "ח"), ("K", "ל"), ("L", "ך"), (":", "ף"),
        ("Z", "ז"), ("X", "ס"), ("C", "ב"), ("V", "ה"), ("B", "נ"), ("N", "מ"), ("M", "צ"), ("<", "ת"), (">", "ץ"),
        
        // Другие клавиши
        ("q", "/"), ("w", "'"), ("'", "ת")
    ],
    
    "Arabic (QWERTY ↔ العربية)": [
        // Верхний ряд
        ("q", "ض"), ("w", "ص"), ("e", "ث"), ("r", "ق"), ("t", "ف"), ("y", "غ"), ("u", "ع"), ("i", "ه"), ("o", "خ"), ("p", "ح"), ("[", "ج"), ("]", "د"),
        
        // Средний ряд
        ("a", "ش"), ("s", "س"), ("d", "ي"), ("f", "ب"), ("g", "ل"), ("h", "ا"), ("j", "ت"), ("k", "ن"), ("l", "م"), (";", "ك"), ("'", "ط"),
        
        // Нижний ряд
        ("z", "ئ"), ("x", "ء"), ("c", "ؤ"), ("v", "ر"), ("b", "لا"), ("n", "ى"), ("m", "ة"), (",", "و"), (".", "ز"), ("/", "ظ"),
        ("`", "ذ"),
        
        // Заглавные
        ("Q", "ض"), ("W", "ص"), ("E", "ث"), ("R", "ق"), ("T", "ف"), ("Y", "غ"), ("U", "ع"), ("I", "ه"), ("O", "خ"), ("P", "ح"), ("{", "ج"), ("}", "د"),
        ("A", "ش"), ("S", "س"), ("D", "ي"), ("F", "ب"), ("G", "ل"), ("H", "ا"), ("J", "ت"), ("K", "ن"), ("L", "م"), (":", "ك"), ("\"", "ط"),
        ("Z", "ئ"), ("X", "ء"), ("C", "ؤ"), ("V", "ر"), ("B", "لا"), ("N", "ى"), ("M", "ة"), ("<", "و"), (">", "ز"), ("?", "ظ"),
        ("~", "ذ")
    ],
    
    // --- Латинские раскладки с измененным положением букв ---
    
    "German (QWERTY ↔ QWERTZ)": [
        ("y", "z"), ("z", "y"), ("Y", "Z"), ("Z", "Y"),
        ("-", "ß"), ("_", "?"), ("=", "´"), ("+", "`"),
        ("[", "ü"), ("{", "Ü"), ("]", "+"), ("}", "*"),
        (";", "ö"), (":", "Ö"), ("'", "ä"), ("\"", "Ä")
    ],
    
    "French (QWERTY ↔ AZERTY)": [
        ("a", "q"), ("q", "a"), ("A", "Q"), ("Q", "A"),
        ("z", "w"), ("w", "z"), ("Z", "W"), ("W", "Z"),
        ("m", ";"), (";", "m"), ("M", ":"), (":", "M"),
        ("`", "ù"), ("1", "&"), ("&", "1"), ("2", "é"), ("é", "2"), ("3", "\""), ("\"", "3"),
        ("4", "'"), ("'", "4"), ("5", "("), ("(", "5"), ("6", "-"), ("-", "6"),
        ("7", "è"), ("è", "7"), ("8", "_"), ("_", "8"), ("9", "ç"), ("ç", "9"),
        ("0", "à"), ("à", "0"), (")", "°"), ("=", "+")
    ],
    
    // --- QWERTY-раскладки с измененными символами ---
    
    "Spanish (ISO)": [
        (";", "ñ"), (":", "Ñ"),
        ("'", "´"), ("\"", "¨"),
        ("`", "ç"), ("~", "Ç"),
        ("!", "¡"), ("?", "¿")
    ],
    
    "Portuguese (Portugal)": [
        ("[", "+"), ("{", "*"),
        ("]", "´"), ("}", "¨"),
        (";", "ç"), (":", "Ç"),
        ("'", "º"), ("\"", "ª"),
        ("`", "<"), ("~", ">")
    ],
    
    "Italian": [
        ("[", "è"), ("{", "é"),
        ("]", "+"), ("}", "*"),
        ("'", "à"), ("\"", "ù"),
        (";", "ò"), (":", "ç"),
        ("`", "\\")
    ],
    
    "Nordic (Swedish/Finnish)": [
        ("[", "å"), ("{", "Å"),
        (";", "ö"), (":", "Ö"),
        ("'", "ä"), ("\"", "Ä"),
        ("=", "?"), ("+", "`")
    ],
    
    "Nordic (Danish/Norwegian)": [
        ("[", "æ"), ("{", "Æ"),
        (";", "ø"), (":", "Ø"),
        ("'", "å"), ("\"", "Å"),
        ("=", "+"), ("+", "?")
    ],
    
    "Turkish - Q": [
        ("i", "ı"), ("I", "İ"), // Главное отличие
        ("[", "ğ"), ("{", "Ğ"),
        ("]", "ü"), ("}", "Ü"),
        (";", "ş"), (":", "Ş"),
        ("'", "i"), ("\"", "İ"),
        (".", "ö"), (">", "Ö"),
        (",", "ç"), ("<", "Ç")
    ],
    
    // --- Региональные варианты QWERTY ---
    
    "British (US QWERTY ↔ UK QWERTY)": [
        ("2", "@"), ("@", "\""),
        ("3", "#"), ("#", "£"),
        ("`", "\\"), ("~", "|"),
        ("\\", "`"), ("|", "~")
    ],
    
    // --- Эргономичные раскладки ---
    
    "Dvorak (from mistyped QWERTY)": [
        ("q", "'"), ("w", ","), ("e", "."), ("r", "p"), ("t", "y"), ("y", "f"), ("u", "g"), ("i", "c"), ("o", "r"), ("p", "l"),
        ("a", "a"), ("s", "o"), ("d", "e"), ("f", "u"), ("g", "i"), ("h", "d"), ("j", "h"), ("k", "t"), ("l", "n"), (";", "s"),
        ("z", ";"), ("x", "q"), ("c", "j"), ("v", "k"), ("b", "x"), ("n", "b"), ("m", "m"),
        
        // Заглавные
        ("Q", "\""), ("W", "<"), ("E", ">"), ("R", "P"), ("T", "Y"), ("Y", "F"), ("U", "G"), ("I", "C"), ("O", "R"), ("P", "L"),
        ("A", "A"), ("S", "O"), ("D", "E"), ("F", "U"), ("G", "I"), ("H", "D"), ("J", "H"), ("K", "T"), ("L", "N"), (":", "S"),
        ("Z", ":"), ("X", "Q"), ("C", "J"), ("V", "K"), ("B", "X"), ("N", "B"), ("M", "M")
    ],
    
    "Colemak (from mistyped QWERTY)": [
        // Буквы
        ("e", "f"), ("r", "p"), ("t", "g"), ("y", "j"), ("u", "l"), ("i", "u"), ("o", "y"), ("p", ";"),
        ("d", "s"), ("f", "t"), ("g", "d"),
        ("k", "n"), ("l", "e"), (";", "i"), ("'", "o"),
        
        // Заглавные
        ("E", "F"), ("R", "P"), ("T", "G"), ("Y", "J"), ("U", "L"), ("I", "U"), ("O", "Y"), ("P", ":"),
        ("D", "S"), ("F", "T"), ("G", "D"),
        ("K", "N"), ("L", "E"), (":", "I"), ("\"", "O")
    ],
    
    "Workman (from mistyped QWERTY)": [
        ("q", "d"), ("w", "r"), ("e", "w"), ("r", "b"), ("t", "j"), ("y", "f"), ("u", "u"), ("i", "p"), ("o", ";"),
        ("a", "a"), ("s", "s"), ("d", "h"), ("f", "t"), ("g", "g"), ("h", "y"), ("j", "n"), ("k", "e"), ("l", "o"), (";", "i"),
        ("z", "z"), ("x", "x"), ("c", "m"), ("v", "c"), ("b", "v"), ("n", "k"), ("m", "l"),
        
        // Заглавные
        ("Q", "D"), ("W", "R"), ("E", "W"), ("R", "B"), ("T", "J"), ("Y", "F"), ("U", "U"), ("I", "P"), ("O", ":"),
        ("A", "A"), ("S", "S"), ("D", "H"), ("F", "T"), ("G", "G"), ("H", "Y"), ("J", "N"), ("K", "E"), ("L", "O"), (":", "I"),
        ("Z", "Z"), ("X", "X"), ("C", "M"), ("V", "C"), ("B", "V"), ("N", "K"), ("M", "L")
    ]
]
